---
import BaseLayout, { type Props as BaseLayoutProps } from './base.astro'
import Meta, { type Props as MetaProps } from './meta.astro'
import Footer from '~/components/site/footer.astro'
import { ViewTransitions } from 'astro:transitions'
import '@fontsource-variable/red-hat-text'
import '@fontsource-variable/jetbrains-mono'

export interface Props extends BaseLayoutProps, MetaProps {}

const { title, description, class: className, ...props } = Astro.props
---

<BaseLayout
  class:list={[
    'flex min-h-screen flex-col bg-zinc-50 text-zinc-950 *:w-full',
    className
  ]}
  {...props}
>
  <slot />
  <Footer />

  <Fragment slot='head'>
    <Meta title={title} description={description} />
    <ViewTransitions />
    <slot name='head' />
  </Fragment>
</BaseLayout>

<script>
  import { registerSW } from 'virtual:pwa-register'

  registerSW({
    immediate: true,
    onOfflineReady: () => console.log('Offline Ready!')
  })
</script>
